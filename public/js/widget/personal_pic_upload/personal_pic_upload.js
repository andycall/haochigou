define(["port","jquery","jquery-ui","jquery.Jcrop","jquery.uploadify"],function(){function a(a){if(parseInt(a.w)>0){var b=h/a.w,e=i/a.h;g.css({width:Math.round(b*c)+"px",height:Math.round(e*d)+"px",marginLeft:"-"+Math.round(b*a.x)+"px",marginTop:"-"+Math.round(e*a.y)+"px"})}$("#x1").val(a.x),$("#y1").val(a.y),$("#x2").val(a.x2),$("#y2").val(a.y2),$("#width").val(a.w),$("#height").val(a.h)}console.log("personal pic loaded"),$(".shadow").css({visibility:"visible"});var b,c,d,e=$("#preview-pane"),f=$("#preview-pane .preview-container"),g=$("#preview-pane .preview-container img"),h=f.width(),i=f.height();$("#target").Jcrop({onChange:a,onSelect:a,aspectRatio:h/i,boxWidth:250,boxHeight:140},function(){var a=this.getBounds();c=a[0],d=a[1],b=this,e.appendTo(b.ui.holder)});var j=$(".jcrop-holder").height();250>j&&($(".jcrop-holder").css({top:(250-j)/2}),$("#preview-pane").css({top:-((250-j)/4)}))});